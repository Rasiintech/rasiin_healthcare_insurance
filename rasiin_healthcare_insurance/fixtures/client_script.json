[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 0,
  "modified": "2025-01-21 11:20:01.246979",
  "module": "Rasiin Healthcare Insurance",
  "name": "Remark on Cancel",
  "script": "frappe.ui.form.on('Sales Invoice', {\n\trefresh(frm) {\n\t\t// your code here\n\t},\n\t\n\tonload: function (frm) {\n        // Override the default cancel button behavior\n        frm.page.set_primary_action(__('Cancel'), function () {\n            // Show custom dialog before proceeding with cancellation\n            frappe.prompt(\n                [\n                    {\n                        label: 'Cancel Remark',\n                        fieldname: 'cancel_remark',\n                        fieldtype: 'Small Text',\n                        reqd: 1, // Make it mandatory\n                    },\n                ],\n                function (values) {\n                    // Save the remark\n                    frappe.call({\n                        method: 'frappe.client.set_value',\n                        args: {\n                            doctype: 'Sales Invoice',\n                            name: frm.doc.name,\n                            fieldname: 'cancel_remark',\n                            value: values.cancel_remark,\n                        },\n                        callback: function () {\n                            frappe.msgprint(__('Cancel Remark saved successfully. Proceeding to cancel the document.'));\n                            // Trigger the default cancel action\n                            frm.savecancel();\n                        },\n                    });\n                },\n                'Cancel Sales Invoice',\n                'Submit'\n            );\n        });\n    },\n})",
  "view": "Form"
 }
]